<div class="activity-summary-inner">
    <div class="flex items-start justify-between gap-3">
        <div class="min-w-0">
            <div class="text-[11px] font-black tracking-wide text-white/70">Info</div>
            <div class="mt-1 text-[12px] font-extrabold text-white truncate">
                {{ summary.location_label }}
            </div>
            <div class="mt-1 text-[11px] font-semibold text-white/55">
                {{ summary.scheduled_date_label }} ‚Ä¢ {{ summary.scheduled_time_label }}{% if summary.duration_label.is_some() %} ‚Ä¢ {{ summary.duration_label.clone().unwrap() }}{% endif %}
            </div>
        </div>
        <button type="button" class="inline-flex items-center justify-center rounded-2xl h-10 w-10 bg-goamet-navy border border-white/15 shadow-sm text-white" title="Sluiten" aria-label="Sluiten">
            ‚úï
        </button>
    </div>

    {% if summary.tab.as_deref() != Some("history") && summary.status != "cancelled" %}
        <div class="mt-3 flex flex-wrap gap-2">
            {% if summary.is_joined %}
                <form method="post" action="/activities/{{ summary.activity_id }}/signup">
                    <input type="hidden" name="action" value="leave">
                    {% if summary.return_to.is_some() %}
                        <input type="hidden" name="return_to" value="{{ summary.return_to.clone().unwrap() }}">
                    {% endif %}
                    <button type="submit" class="rounded-2xl px-4 py-3 text-sm font-black bg-white/10 border border-white/15 text-white shadow-sm">
                        Afmelden
                    </button>
                </form>
            {% else %}
                {% if summary.is_full %}
                    {% if summary.waitlist_enabled %}
                        {% if summary.am_on_waitlist %}
                            <form method="post" action="/activities/{{ summary.activity_id }}/waitlist">
                                <input type="hidden" name="action" value="remove_waitlist">
                                {% if summary.return_to.is_some() %}
                                    <input type="hidden" name="return_to" value="{{ summary.return_to.clone().unwrap() }}">
                                {% endif %}
                                <button type="submit" class="rounded-2xl px-4 py-3 text-sm font-black bg-white/10 border border-white/15 text-white shadow-sm">
                                    Van wachtlijst
                                </button>
                            </form>
                        {% else %}
                            <form method="post" action="/activities/{{ summary.activity_id }}/waitlist">
                                <input type="hidden" name="action" value="set_waitlisted">
                                {% if summary.return_to.is_some() %}
                                    <input type="hidden" name="return_to" value="{{ summary.return_to.clone().unwrap() }}">
                                {% endif %}
                                <button type="submit" class="rounded-2xl px-4 py-3 text-sm font-black bg-goamet-pink text-white shadow-sm">
                                    Op wachtlijst
                                </button>
                            </form>
                        {% endif %}
                    {% else %}
                        <button type="button" class="rounded-2xl px-4 py-3 text-sm font-black bg-white/5 border border-white/10 text-white/60 shadow-sm" disabled>
                            Vol
                        </button>
                    {% endif %}
                {% else %}
                    <form method="post" action="/activities/{{ summary.activity_id }}/signup">
                        <input type="hidden" name="action" value="join">
                        {% if summary.return_to.is_some() %}
                            <input type="hidden" name="return_to" value="{{ summary.return_to.clone().unwrap() }}">
                        {% endif %}
                        <button type="submit" class="rounded-2xl px-4 py-3 text-sm font-black bg-goamet-blue text-white shadow-sm">
                            Aanmelden
                        </button>
                    </form>
                {% endif %}
            {% endif %}
        </div>
    {% endif %}

    {% if summary.organizer_name.is_some() %}
        <div class="mt-3 flex items-center gap-2">
            <div class="h-8 w-8 rounded-full overflow-hidden border border-white/10 bg-goamet-navy shadow-sm">
                {% if summary.organizer_photo_image_id.is_some() %}
                    <img class="h-full w-full object-cover" src="/images/{{ summary.organizer_photo_image_id.clone().unwrap() }}" alt="" loading="lazy" onerror="this.style.display='none'">
                {% endif %}
            </div>
            <div class="text-[12px] font-extrabold text-white/80 truncate">üëë {{ summary.organizer_name.clone().unwrap() }}</div>
        </div>
    {% endif %}

    {% if summary.description.is_some() %}
        <div class="mt-3 text-[12px] font-semibold text-white/70 leading-snug">
            {{ summary.description.clone().unwrap() }}
        </div>
    {% endif %}

    <div class="mt-3 flex flex-wrap gap-2">
        {% if summary.category_name.is_some() %}
            <span class="inline-flex items-center rounded-full bg-white/10 border border-white/10 px-3 py-1.5 text-[10px] font-black text-white/80">
                {{ summary.category_name.clone().unwrap() }}
            </span>
        {% endif %}
        <span class="inline-flex items-center rounded-full {% if summary.is_full %}bg-goamet-pink/15 border-goamet-pink/25 text-white{% else %}bg-goamet-blue/15 border-goamet-blue/25 text-white{% endif %} border px-3 py-1.5 text-[10px] font-black">
            {{ summary.current_participants_count }}/{{ summary.max_participants }}{% if summary.is_full %} ‚Ä¢ VOL{% endif %}
        </span>
        {% if summary.waitlist_count > 0 %}
            <span class="inline-flex items-center rounded-full bg-white/10 border border-white/10 px-3 py-1.5 text-[10px] font-black text-white/75">
                ‚è≥ {{ summary.waitlist_count }} wachtlijst
            </span>
        {% endif %}
    </div>

    {% if summary.tags.len() > 0 %}
        <div class="mt-3 flex flex-wrap gap-2">
            {% for t in summary.tags %}
                <span class="inline-flex items-center rounded-full bg-white/5 border border-white/10 px-3 py-1.5 text-[10px] font-black text-white/70">
                    #{{ t }}
                </span>
            {% endfor %}
        </div>
    {% endif %}
</div>
